{% use 'TwigBundle:Form:div_layout.html.twig' %}
{% block js_date_widget %}
{% spaceless %}
    {{ block('text_widget') }}
    <script type="text/javascript">
        $(function() {
            $("#{{ id }}").datepicker({
                dateFormat:     '{{ date_format|raw }}',
                changeMonth:    {{ change_month }},
                changeYear:     {{ change_year }},
                firstDay:       {{ first_day }},
                gotoCurrent:    {{ go_to_current }},
                numberOfMonths: {{ number_of_months }},
                closeText:      '{% trans %}Close{% endtrans %}',
                currentText:    '{% trans %}Today{% endtrans %}',
                prevText:       '{% trans %}Prev{% endtrans %}',
                nextText:       '{% trans %}Next{% endtrans %}',
                dayNames:       [{% trans %}'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'{% endtrans %}],
                dayNamesMin:    [{% trans %}'Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'{% endtrans %}],
                dayNamesShort:  [{% trans %}'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'{% endtrans %}],
                monthNames:     [{% trans %}'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'{% endtrans %}],
                monthNamesShort: [{% trans %}'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'{% endtrans %}]
                {% if other %}
                , {{ other|raw }}
                {% endif %}
            });
	});
    </script>
{% endspaceless %}
{% endblock %}

{% block entity_autocomplete_widget %}
{% spaceless %}
    {{ form_widget(form.text) }}
    {{ form_widget(form.key) }}
    <img src="{{ asset(image_autocomplete) }}" style="margin-left: 5px;" alt="autocomplete" />
    <img src="{{ asset(image_ok) }}" style="display: none; margin-left: 5px;" id="image_{{id}}" alt="ok" />
    
    <script type="text/javascript">
        $(function() {
            $("#{{ form.children.text.vars.id }}").unbind();
            $("#{{ form.children.text.vars.id }}").bind("change", function(){
                $("#{{ form.children.key.vars.id }}").val('');
                $("#image_{{id}}").hide();
            });
            $("#{{ form.children.text.vars.id }}").autocomplete({
                source: '{{ url }}',
                minLength: {{ min_chars }},
                select: function( event, ui ) {
                    if(ui.item){
                        $("#{{ form.children.key.vars.id }}").val(ui.item.key);
                        $("#image_{{id}}").show();
                    }
                 } 
            });
            if($("#{{ form.children.key.vars.id }}").val()){
                $("#image_{{id}}").show();
            }
	});
    </script>
{% endspaceless %}
{% endblock %}

{% block multi_entity_autocomplete_widget %}
{% spaceless %}
    <input type="text" {{ block('attributes') }} value="" />

    <script type="text/javascript">
        $(function() {
            $("#{{ id }}").tokenInput('{{ url }}', {
                hintText:           '{{ hint_text|trans }}',
                noResultsText:      '{{ no_results_text|trans }}',
                searchingText:      '{{ searching_text|trans }}',
                theme:              '{{ theme }}',
                minChars:           {{ min_chars }},
                preventDuplicates:  {{ prevent_duplicates }},
                queryParam:         '{{ query_param }}',
                tokenLimit:         {{ max }}
                {% if value %}
                ,prePopulate:       {{ value|raw }}
                {% endif %}
            });
        });
    </script>
{% endspaceless %}
{% endblock %}